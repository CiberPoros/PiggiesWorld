@using PiggiesWorld.PL.Web.Models;
@using PiggiesWorld.BLL.Contracts;
@using Ninject; 

@{
    Layout = null;

    if (!User.IsInRole("admin") && !User.IsInRole("moderator"))
    {
        Response.Redirect("~/Pages/PhotoPages/Photo.cshtml");
    }

    if (IsPost)
    {
        var photoId = int.Parse(Request["photoID"]);
        var photoManager = DependencesResolver.Resolver.Get<IPhotoManager>();

        photoManager.DeletePhotoById(photoId);
    }

    Response.Redirect("~/Pages/PhotoPages/Photo.cshtml");
}
